DROP TABLE CARSENSOR;
DROP TABLE CAR;
DROP TABLE USERS;
DROP TABLE ADMIN;
DROP SEQUENCE C_SEQ;


CREATE TABLE USERS (
	USERID	VARCHAR2(40)		NOT NULL,
	USERPWD	VARCHAR2(20)		NOT NULL,
	USERNAME	VARCHAR2(30)		NOT NULL,
	USERPHONE	VARCHAR2(12)		NOT NULL,
	USERBIRTH	DATE		NOT NULL,
	USERSEX	VARCHAR2(1)		NOT NULL,
	USERREGDATE	DATE		NOT NULL,
	USERSTATE	VARCHAR2(1)	DEFAULT 'f' NOT NULL,
	USERSUBJECT	VARCHAR2(30)	DEFAULT 'car'	NOT NULL,
	BABYPUSHCHECK	VARCHAR2(1)	DEFAULT 'o'	NOT NULL,
	ACCPUSHCHECK	VARCHAR2(1)	DEFAULT 'o'	NOT NULL,
    MOBILETOKEN	VARCHAR2(100)		NOT NULL
);



CREATE TABLE CAR (
	CARID	NUMBER		NOT NULL,
	USERID	VARCHAR2(40)		NOT NULL,
	CARNUM	VARCHAR2(30)		NOT NULL,
	CARNAME	VARCHAR2(30)		NOT NULL,
	CARTYPE	VARCHAR2(1)		NOT NULL,
	CARMODEL	VARCHAR2(50)		NOT NULL,
	CARYEAR	NUMBER		NOT NULL,
	CARIMG	VARCHAR2(30)		NOT NULL,
	CAROILTYPE	VARCHAR2(30)		NOT NULL,
    TABLETTOKEN	VARCHAR2(100)		NOT NULL
);



CREATE TABLE ADMIN (
	ADMINID	VARCHAR2(40)		NOT NULL,
	ADMINPWD	VARCHAR2(20)		NOT NULL,
	ADMINNAME	VARCHAR2(30)		NOT NULL,
	ADMINPHONE	VARCHAR2(12)		NOT NULL,
	ADMINSTATE	VARCHAR2(1)  DEFAULT 'f' NULL
);


CREATE TABLE CARSENSOR (
	CARID	NUMBER		NOT NULL,
	HEARTBEAT	NUMBER		NULL,
	PIRFRONT	VARCHAR2(1)		NULL,
	PIRREAR	VARCHAR2(1)		NULL,
	FREIGHT	NUMBER		NULL,
	FUEL	NUMBER		NULL,
	FUELMAX	NUMBER	DEFAULT 50	NOT NULL,
	TEMPER	NUMBER		NULL,
	STARTING	VARCHAR2(1)		NULL,
	MOVING	VARCHAR2(1)		NULL,
    MOVINGSTARTTIME	  DATE		NULL,
	AIRCON	VARCHAR2(1)		NULL,
	CRASH	VARCHAR2(1)		NULL,
	DOOR	VARCHAR2(1)		NULL,
	LAT	NUMBER(9,6)		NULL,
	LNG	NUMBER(9,6)		NULL
);


CREATE SEQUENCE C_SEQ 
INCREMENT BY 1 
START WITH 1;


ALTER TABLE USERS ADD CONSTRAINT PK_USERS PRIMARY KEY (
	USERID
);

ALTER TABLE CAR ADD CONSTRAINT PK_CAR PRIMARY KEY (
	CARID
);

ALTER TABLE ADMIN ADD CONSTRAINT PK_ADMIN PRIMARY KEY (
	ADMINID
);


ALTER TABLE CAR ADD CONSTRAINT FK_USERS_TO_CAR_1 FOREIGN KEY (
	USERID
)
REFERENCES USERS (
	USERID
);

ALTER TABLE CARSENSOR ADD CONSTRAINT FK_CAR_TO_CARSENSOR_1 FOREIGN KEY (
	CARID
)
REFERENCES CAR (
	CARID
);

ALTER TABLE CARSENSOR ADD CONSTRAINT PK_CARSENSOR PRIMARY KEY (
	CARID
);


----------------------샘플데이터----------------------
INSERT INTO USERS VALUES ('id01','pwd01','테스트이름','01012341234',TO_DATE('1990-02-25','yyyy-mm-dd'),'m',SYSDATE,'f','car','o','o','mobiletoken1');
INSERT INTO CAR VALUES (C_SEQ.NEXTVAL,'id01','12가1234','내차','p','아반떼','2020','car1.jpg','l','tablettoken1');
INSERT INTO CARSENSOR VALUES (1,100,'y','n',500,30,50,15,'o','f',SYSDATE,'f','n','f',36.123456,12.123456)